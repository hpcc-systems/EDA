<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>THOR/FLAT Files</title><link rel="stylesheet" href="eclipsehelp.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.1"><link rel="home" href="index.html" title="ECL Reference"><link rel="up" href="bk01ch05s02.html" title="DATASET"><link rel="prev" href="bk01ch05s02.html" title="DATASET"><link rel="next" href="bk01ch05s02s02.html" title="CSV Files"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">THOR/FLAT Files</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="bk01ch05s02.html">Prev</a>&nbsp;</td><th width="60%" align="center">DATASET</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="bk01ch05s02s02.html">Next</a></td></tr></table><hr></div><div class="sect2" title="THOR/FLAT Files"><div class="titlepage"><div><div><h3 class="title"><a name="THOR-FLAT_Files"></a>THOR/FLAT Files</h3></div></div></div><p><span class="emphasis"><em> attr</em></span><span class="bold"><strong> := DATASET(</strong></span><span class="emphasis"><em> file, struct, </em></span><span class="bold"><strong>THOR<a class="indexterm" name="d4e2277"></a> [</strong></span><span class="emphasis"><em>,</em></span><span class="bold"><strong>__COMPRESSED__<a class="indexterm" name="d4e2281"></a><a class="indexterm" name="d4e2283"></a>][,OPT<a class="indexterm" name="d4e2285"></a> ]</strong></span><span class="bold"><strong> [,UNSORTED<a class="indexterm" name="d4e2288"></a>][,PRELOAD<a class="indexterm" name="d4e2290"></a>([</strong></span><span class="emphasis"><em>nbr</em></span><span class="bold"><strong>])]</strong></span><span class="bold"><strong> [,ENCRYPT<a class="indexterm" name="d4e2295"></a>(</strong></span><span class="emphasis"><em>key</em></span><span class="bold"><strong>) ]);</strong></span></p><p><span class="emphasis"><em> attr</em></span><span class="bold"><strong> := DATASET(</strong></span><span class="emphasis"><em> file, struct, </em></span><span class="bold"><strong>FLAT [</strong></span><span class="emphasis"><em>,</em></span><span class="bold"><strong>__COMPRESSED__] [,OPT]</strong></span><span class="bold"><strong> [,UNSORTED] [,PRELOAD([</strong></span><span class="emphasis"><em>nbr</em></span><span class="bold"><strong>])]</strong></span><span class="bold"><strong> [,ENCRYPT(</strong></span><span class="emphasis"><em>key</em></span><span class="bold"><strong>) ]);</strong></span></p><div class="informaltable"><table border="0"><colgroup><col width="21%" align="left"><col width="79%"></colgroup><tbody><tr><td align="left"><span class="bold"><strong>THOR</strong></span></td><td>Specifies the <span class="emphasis"><em>file</em></span> is in the Data Refinery (may optionally be specified as <span class="bold"><strong>FLAT</strong></span><a class="indexterm" name="d4e2323"></a>, which is synonymous with THOR in this context).</td></tr><tr><td align="left"><span class="bold"><strong>__COMPRESSED__</strong></span></td><td>Optional. Specifies that the THOR <span class="emphasis"><em>file</em></span> on another supercomputer cluster is compressed because it is a result of the PERSIST Workflow Service.</td></tr><tr><td align="left"><span class="bold"><strong>__GROUPED__</strong></span></td><td>Specifies the DATASET has been grouped using the GROUP function.</td></tr><tr><td align="left"><span class="bold"><strong>OPT</strong></span></td><td>Optional. Specifies that using dataset when the THOR <span class="emphasis"><em>file</em></span> doesn't exist results in an empty recordset instead of an error condition.</td></tr><tr><td align="left"><span class="bold"><strong>UNSORTED</strong></span></td><td>Optional. Specifies the THOR <span class="emphasis"><em>file</em></span> is not sorted, as a hint to the optimizer.</td></tr><tr><td align="left"><span class="bold"><strong>PRELOAD</strong></span></td><td>Optional. Specifies the <span class="emphasis"><em>file</em></span> is left in memory after loading (valid only for Rapid Data Delivery Engine use).</td></tr><tr><td align="left"><span class="emphasis"><em>nbr</em></span></td><td>Optional. An integer constant specifying how many indexes to create &#8220;on the fly&#8221; for speedier access to the dataset. If &gt; 1000, specifies the amount of memory set aside for these indexes.</td></tr><tr><td align="left"><span class="bold"><strong>ENCRYPT</strong></span></td><td>Optional. Specifies the <span class="emphasis"><em>file</em></span> was created by OUTPUT with the ENCRYPT option.</td></tr><tr><td align="left">key</td><td>A string constant containing the encryption key used to create the file.</td></tr></tbody></table></div><p>This form defines a THOR file that exists in the Data Refinery. This could contain either fixed-length or variable-length records, depending on the layout specified in the RECORD <span class="emphasis"><em>struct</em></span>.</p><p>The <span class="emphasis"><em>struct</em></span> may contain an UNSIGNED8 field with either <span class="emphasis"><em>{virtual(fileposition)}</em></span> or <span class="emphasis"><em>{virtual(localfileposition)}</em></span> appended to the field name. This indicates the field contains the record's position within the file (or part), and is used for those instances where a usable pointer to the record is needed, such as the BUILD function.</p><p>Example:</p><pre class="programlisting">PtblRec := RECORD
  STRING2 State := Person.per_st;
  STRING20 City := Person.per_full_city;
  STRING25 Lname := Person.per_last_name;
  STRING15 Fname := Person.per_first_name;
END;
          
Tbl := TABLE(Person,PtblRec);
         
PtblOut := OUTPUT(Tbl,,'RTTEMP::TestFile');
          //write a THOR file
         
Ptbl := DATASET('~Thor400::RTTEMP::TestFile',
                {PtblRec,UNSIGNED8 __fpos {virtual(fileposition)}},
                THOR,OPT);
             // __fpos contains the "pointer" to each record
             // Thor400 is the scope name and RTTEMP is the
             // directory in which TestFile is located
             //using ENCRYPT
OUTPUT(Tbl,,'~Thor400::RTTEMP::TestFileEncrypted',ENCRYPT('mykey'));
PtblE := DATASET('~Thor400::RTTEMP::TestFileEncrypted',
                 PtblRec,
                 THOR,OPT,ENCRYPT('mykey'));</pre></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bk01ch05s02.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="bk01ch05s02.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="bk01ch05s02s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">DATASET&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;CSV Files</td></tr></table></div></body></html>